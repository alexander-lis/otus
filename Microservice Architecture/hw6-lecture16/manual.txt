*** Описание работы ***
Домашняя работа №6.
Репозиторий: https://github.com/alexander-lis/otus
Реализовал обозначенные в задании сервисы и межсервисное взаимодействие на основе событийной модели.
Написал тесты для Postman покрывающие кейсы описанные в задании включая проверку списания средств с лицевого счета и отправку уведомлений.
Каждый сервис имеет UI Swagger с помощью которого по желанию можно вручную отправить запросы на получения отправленных сообщений и состояния лицевого счета или дернуть списание средств с лицевого счета.

*** Структура приложения и взаимодействие сервисов ***
- В качестве брокера сообщений используется RabbitMQ. Экземпляр поднят в https://www.cloudamqp.com/.

- Сервис Auth - пользователи. Имеет REST API регистрации пользователя.
    (http://arch.homework/auth/swagger/index.html)
- Сервис Orders - заказы. Имеет REST API создания заказа.
    (http://arch.homework/orders/swagger/index.html)
- Сервис Billing - счета. Имеет REST API пополнения счета пользователя.
    (http://arch.homework/billing/swagger/index.html)
- Сервис Notifications - уведомления.
    (http://arch.homework/notifications/swagger/index.html)

Логически разделил сообщения на события и команды.
Команды принимаются сервисом уведомлений и он сам определяет их контракт. Их может отправить любой сервис.
События генерируются конкретным сервисом. На них может подписаться любой сервис.

Сервис Notifications определяет 4 вида команд (или уведомлений):
    - NotifyOrderCreated - команда на отправку уведомления о создании заказа.
    - NotifyOrderPaymentSucceded - команда на отправку уведомления об успешной оплате заказа.
    - NotifyOrderPaymentDeclined - команда на отправку уведомления об неудачной оплате заказа.
    - NotifyUserCreated - команда на отправку уведомления об успешной регистрации.

Сервис Auth после успешной регистрации пользователя через REST API публикует в RabbitMQ:
    - Команду NotifyUserCreated.
    - Событие UserCreated.

Сервис Billing подписывается на: 
    - Событие UserCreated и создает лицевой счет пользователя при его получении.
    - Событие OrderCreated и пытается списать деньги со счета при его получении.
    а так же публикует:
    - Команду NotifyOrderPaymentSucceded при успешной оплате.
    - Команду NotifyOrderPaymentDeclined при неудачной оплате.
    
Серивс Orders после успешного создания заказа через REST API публикует в RabbitMQ:
    - Команду NotifyOrderCreated.
    - Событие OrderCreated.

*** Установка приложения и запуск тестов ***
Все действия выполнялись в Minikube.
1. Перейти в папку "hw6-lecture16/myapp-chart".
2. Выполнить команду "helm install myapp . -f values.yaml" или "helm install myapp . -f values-arm.yaml" в зависимости от процессора.
3. Тестирование:
- При прогоне тестов автоматически генерируются login/password для пользователя и запускаются кейсы в соответствии с заданием.
- Перейти в папку "hw6-lecture16/postman".
- Открыть в Postman коллекцию "otus_hw6.postman_collection.json" и запустить тесты.
- Или выполнить команду "newman run otus_hw6.postman_collection.json".